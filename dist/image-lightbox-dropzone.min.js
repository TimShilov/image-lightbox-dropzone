"use strict";!function(i){var d,o={onDeleted:void 0,onUploaded:void 0,ajax:{method:"POST",url:"",data:{}},dropzone:{url:"",acceptedFiles:".jpg,.jpeg,.png",maxFilesize:4,previewTemplate:'<div style="display: none"></div>',uploadMultiple:!1,dictDefaultMessage:""}};function e(t,e){var n=i(t),a=i.extend(!0,{},o,e);n.data("options",a),"IMG"!==t.tagName&&(n.addClass("ild-no-image"),n.html('Add Image<i class="fa fa-pencil"></i>')),n.off("click").on("click",function(){!function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];i("#ild-shade").remove();var n=t.attr("src"),a=t.data("options"),o='<div id="ild-shade" class="shade" style="display: none">\n\t\t\t\t\t\t\t\t<button class="closeBtn">+</button>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class="image-wrapper" style="'.concat(e?"display: none":"",'">\n\t\t\t\t\t\t\t\t\t\t<img id="shadeImg" src="').concat(n,'" alt="">\n\t\t\t\t\t\t\t\t\t\t<div class="buttons">\n\t\t\t\t\t\t\t\t\t\t<a class="deleteBtn">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-trash" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="ild-dropzone" class="dropzone drop-area dropzone-file-area" style="').concat(e?"":"display: none",'">\n\t\t\t\t\t\t\t\t\t\t<div class="dz-default dz-message">\n\t\t\t\t\t\t\t\t\t\t\t<h3>Drop new image here or click to upload</h3>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>');(d=i(o).appendTo("body")).off("click").on("click",function(t){"shade"===t.target.className&&s()}),e&&c(a);d.find(".closeBtn").off("click").on("click",s),d.find(".deleteBtn").off("click").on("click",function(){r(a)}),d.fadeIn(150)}(n,"IMG"!==t.tagName)})}var s=function(){i("#ild-shade").fadeOut(150,function(){i("#ild-shade").remove()})},r=function(t){i.ajax({url:t.ajax.url,method:t.ajax.method,data:t.ajax.data}).done(function(){toastr.success("Image deleted successfully."),d.find("img").remove(),i(".image-wrapper").hide(),c(t),t.onDeleted&&t.onDeleted()}).fail(function(t){toastr.error(t.responseJSON.error||"Image not updated.")})},c=function(a){var t=i.extend(!0,{},a.dropzone,{init:function(){var n=this;this.on("success",function(t,e){if("success"!==e.status)return toastr.error(e.responseJSON.error||"Image not updated."),!1;toastr.success("Image added successfully."),s(),a.onUploaded&&a.onUploaded(),n.removeFile(t)}),this.on("error",function(t,e){n.removeFile(t),toastr.error(e.error||e||"Error")})}});d.find(".dropzone").dropzone(t).show()};i.fn.imageLightbox=function(t){return this.length?this.each(function(){e(this,t)}):this}}(jQuery);