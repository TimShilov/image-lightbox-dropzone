"use strict";!function(i){var d,a={onDeleted:void 0,onUploaded:void 0,ajax:{method:"POST",url:"",data:{}},dropzone:{url:"",acceptedFiles:".jpg,.jpeg,.png",maxFilesize:4,previewTemplate:'<div style="display: none"></div>',uploadMultiple:!1,dictDefaultMessage:""}};function t(e,t){var n=i.extend(!0,{},a,t);i(e).data("options",n),i(e).off("click").on("click",function(){!function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];i("#imageShade").remove();var n=i(e).attr("src"),a=e.data("options"),o='<div id="imageShade" class="shade" style="display: none">\n                              <button class="closeBtn">+</button>\n                              <div>\n                                 <div class="image-wrapper" style="'.concat(t?"display: none":"",'">\n                                    <img id="shadeImg" src="').concat(n,'" alt="">\n                                    <div class="buttons">\n                                       <a class="deleteBtn">\n                                          <i class="fa fa-trash" aria-hidden="true"></i>\n                                       </a>\n                                    </div>\n                                 </div>\n                                 <div class="dropzone drop-area dropzone-file-area" id="image-block-dropzone" style="').concat(t?"":"display: none",'">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="dz-default dz-message">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h3>Drop files here or click to upload</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n                                 </div>\n                              </div>\n                           </div>');(d=i(o).appendTo("body")).off("click").on("click",function(e){"shade"===e.target.className&&s()}),t&&c(a);d.find(".closeBtn").off("click").on("click",s),d.find(".deleteBtn").off("click").on("click",function(){r(a)}),d.fadeIn(150)}(i(e),"IMG"!==e.tagName)})}var s=function(){i("#imageShade").fadeOut(150,function(){i("#imageShade").remove()})},r=function(e){i.ajax({url:e.ajax.url,method:e.ajax.method,data:e.ajax.data}).done(function(){toastr.success("Image deleted successfully."),d.find("img").remove(),i(".image-wrapper").hide(),c(e),e.onDeleted&&e.onDeleted()}).fail(function(e){toastr.error(e.responseJSON.error||"Image not updated.")})},c=function(a){var e=i.extend(!0,{},a.dropzone,{init:function(){var n=this;this.on("success",function(e,t){if("success"!==t.status)return toastr.error(t.responseJSON.error||"Image not updated."),!1;toastr.success("Image added successfully."),s(),a.onUploaded&&a.onUploaded(),n.removeFile(e)}),this.on("error",function(e,t){n.removeFile(e),toastr.error(t.error||t||"Error")})}});d.find(".dropzone").dropzone(e).show()};i.fn.imageLightbox=function(e){return this.length?this.each(function(){t(this,e)}):this}}(jQuery);